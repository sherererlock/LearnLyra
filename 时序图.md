## 时序

拾起枪支的的函数调用顺序

```c++
WeaponSpawner::GiveWeapon();
{
    ULyraInventoryManagerComponent::AddItemDefinition(TSubclassOf<ULyraInventoryItemDefinition> ItemDef, int32 StackCount);
    {
        FLyraInventoryList::AddEntry(TSubclassOf<ULyraInventoryItemDefinition> ItemDef, int32 StackCount);
        {
            // 创建ULyraInventoryItemInstance
            NewObject<ULyraInventoryItemInstance>(OwnerComponent->GetOwner());
            
            ULyraInventoryItemFragment::OnInstanceCreated(ULyraInventoryItemInstance* Instance);
        }
    }
    
    ULyraQuickBarComponent::AddItemToSlot(int32 SlotIndex, ULyraInventoryItemInstance* Item);
    {
        
    }
    ULyraQuickBarComponent::SetActiveSlotIndex(int32 NewIndex);
    {
        ULyraQuickBarComponent::SetActiveSlotIndex_Implementation(int32 NewIndex);
        {
            ULyraQuickBarComponent::EquipItemInSlot();
        }
    }
    
}
```

装备枪支的函数调用顺序

```c++
ULyraQuickBarComponent::EquipItemInSlot();
{
    ULyraEquipmentManagerComponent::EquipItem(TSubclassOf<ULyraEquipmentDefinition> EquipmentClass);
    {
        FLyraEquipmentList::AddEntry(TSubclassOf<ULyraEquipmentDefinition> EquipmentDefinition)；
        {
            // 根据EquipmentDefinition生成相应的EquipmentInstance
            // 根据EquipmentDefinition像ASC添加相应的技能
            
            // 生成Actor
            ULyraEquipmentInstance::SpawnEquipmentActors(const TArray<FLyraEquipmentActorToSpawn>& ActorsToSpawn);
        }
        
        ULyraEquipmentInstance::OnEquipped();
    }
}
```

